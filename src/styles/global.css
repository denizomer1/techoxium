/*
  The CSS in this style tag is based off of Bear Blog's default CSS.
  https://github.com/HermanMartinus/bearblog/blob/297026a877bc2ab2b3bdfbd6b9f7961c350917dd/templates/styles/blog/default.css
  License MIT: https://github.com/HermanMartinus/bearblog/blob/master/LICENSE.md
 */

:root {
  --accent: #2337ff;
  --accent-dark: #000d8a;
  --black: 15, 18, 25;
  --gray: 96, 115, 159;
  --gray-light: 229, 233, 240;
  --gray-dark: 34, 41, 57;
  --gray-gradient: rgba(var(--gray-light), 50%), #fff;
  --box-shadow:
    0 2px 6px rgba(var(--gray), 25%), 0 8px 24px rgba(var(--gray), 33%),
    0 16px 32px rgba(var(--gray), 33%);
}

body.dark {
  --accent: #7b9fff;
  --accent-dark: #2337ff;
  --black: 243, 243, 243;
  --gray: 180, 190, 210;
  --gray-light: 40, 44, 52;
  --gray-dark: 220, 220, 220;
  --gray-gradient: #23272f, #181a1b;
  background: #181a1b !important;
  color: #f3f3f3 !important;
}
@font-face {
  font-family: "Atkinson";
  src: url("/fonts/atkinson-regular.woff") format("woff");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: "Atkinson";
  src: url("/fonts/atkinson-bold.woff") format("woff");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}
body {
  font-family: "Atkinson", sans-serif;
  margin: 0;
  padding: 0;
  text-align: left;
  background: linear-gradient(var(--gray-gradient)) no-repeat #ffffff;
  background-size: 100% 600px;
  word-wrap: break-word;
  overflow-wrap: break-word;
  color: rgb(var(--gray-dark));
  font-size: 20px;
  line-height: 1.7;
  transition: background 0.3s, color 0.3s;
}
main {
  max-width: 960px;
  width: min(95%, 960px);
  margin: 0 auto;
  padding: 2.5rem 1rem;
}
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0 0 0.5rem 0;
  color: rgb(var(--black));
  line-height: 1.2;
}
h1 {
  font-size: clamp(1.8rem, 3.6vw, 3.2rem);
}
h2 {
  font-size: clamp(1.4rem, 3.0vw, 2.1rem);
}
h3 {
  font-size: clamp(1.15rem, 2.2vw, 1.6rem);
}
h4 {
  font-size: 1.563em;
}
h5 {
  font-size: 1.25em;
}
strong,
b {
  font-weight: 700;
}
a {
  color: var(--accent);
}
a:hover {
  color: var(--accent);
}
p {
  margin-bottom: 1em;
}
.prose p {
  margin-bottom: 2em;
}
textarea {
  width: 100%;
  font-size: 16px;
}
input {
  font-size: 16px;
}
table {
  width: 100%;
}
img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
}
code {
  padding: 2px 5px;
  background-color: rgb(var(--gray-light));
  border-radius: 2px;
}
pre {
  padding: 1.5em;
  border-radius: 8px;
}
pre > code {
  all: unset;
}
blockquote {
  border-left: 4px solid var(--accent);
  padding: 0 0 0 20px;
  margin: 0px;
  font-size: 1.333em;
}
hr {
  border: none;
  border-top: 1px solid rgb(var(--gray-light));
}
@media (max-width: 720px) {
  body {
    font-size: 18px;
  }
  main {
    padding: 1.25rem 0.75rem;
  }
}

/* utility spacing */
.container {
  width: min(95%, 1100px);
  margin: 0 auto;
}

.sr-only {
  border: 0;
  padding: 0;
  margin: 0;
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  /* IE6, IE7 - a 0 height clip, off to the bottom right of the visible 1px box */
  clip: rect(1px 1px 1px 1px);
  /* maybe deprecated but we need to support legacy browsers */
  clip: rect(1px, 1px, 1px, 1px);
  /* modern browsers, clip-path works inwards from each corner */
  clip-path: inset(50%);
  /* added line to stop words getting smushed together (as they go onto separate lines and some screen readers do not understand line feeds as a space */
  white-space: nowrap;
}

/* Animation utilities */
.animate {
  opacity: 0;
  transform: translateY(8px);
  transition: opacity 420ms cubic-bezier(.2,.9,.2,1), transform 420ms cubic-bezier(.2,.9,.2,1);
}
.site-loaded .animate {
  opacity: 1;
  transform: translateY(0);
}
.stagger {
  transition-delay: calc(var(--index, 0) * 80ms);
}

/* Accessible focus styles */
:focus {
  outline: none;
}

/* Show clear outline for keyboard users */
*:focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: 3px;
  border-radius: 6px;
}

/* Card focus specifics */
.card:focus-within {
  box-shadow: 0 10px 30px rgba(2,6,23,0.12);
  transform: translateY(-2px);
}

@media (prefers-reduced-motion: reduce) {
  .animate { transition: none !important; transform: none !important; opacity: 1 !important; }
}

/* Dark-mode content tweaks: increase contrast and darken surfaces for blog content */
body.dark main,
body.dark .prose {
  background: transparent;
  color: #e6eef8; /* lighter text for reading */
}

/* Make code blocks and pre tags darker and higher contrast */
body.dark pre {
  background: #0b0d0f; /* very dark surface */
  color: #e6eef8;
  border: 1px solid rgba(255,255,255,0.04);
}
body.dark code {
  background-color: rgba(255,255,255,0.03);
  color: #f3f6fb;
}

/* Blockquotes and horizontal rules: subtle, darker surfaces */
body.dark blockquote {
  background: rgba(255,255,255,0.02);
  border-left-color: rgba(123,159,255,0.9);
  color: #e6eef8;
}
body.dark hr {
  border-top-color: rgba(255,255,255,0.06);
}

/* Links in dark mode: slightly brighter accent */
body.dark a { color: #9bb6ff; }
body.dark a:hover { color: #cfe0ff; }

/* Explicit light mode class to lock design if browser attempts auto-darkening */
body.light { background: #ffffff; color: rgb(var(--gray-dark)); }
/* body.dark .grid -- no wrapper styles required */

body.dark .grid .card {
  background: #0b0f12; /* dark card background */
  color: #e6eef8;
  box-shadow: 0 10px 30px rgba(2,6,23,0.6);
  border: 1px solid rgba(255,255,255,0.03);
}

body.dark .grid .card a { color: inherit; text-decoration: none; }
body.dark .grid .card img {
  width: 100%;
  height: auto;
  border-radius: 6px;
  display: block;
  object-fit: cover;
  filter: brightness(0.92) saturate(0.9);
  margin-bottom: 0.5rem;
}
body.dark .grid .card h3 { color: #ffffff; margin: 0.25rem 0 0.4rem; }
body.dark .grid .card p { color: #aebdd8; margin: 0; }

/* Light-mode: adopt denser card/content visuals similar to dark mode */
body:not(.dark) main,
body:not(.dark) .prose {
  color: rgb(var(--gray-dark));
}

/* Cards used across the site (home/blog lists) */
.card {
  background: #ffffff;
  border-radius: 12px;
  padding: 1rem;
  box-shadow: 0 10px 30px rgba(2,6,23,0.06);
  border: 1px solid rgba(2,6,23,0.04);
}

/* Make images and headings pop on light mode like dark mode */
body:not(.dark) .card img {
  border-radius: 8px;
  display: block;
  width: 100%;
  height: auto;
  object-fit: cover;
  margin-bottom: 0.5rem;
}

/* Light-mode code / pre styling to look like inverted dark blocks */
pre {
  background: #f6f8fb;
  color: #0b0f12;
  border: 1px solid rgba(2,6,23,0.04);
}
code {
  background-color: rgba(var(--gray-light), 1);
  color: #0b0f12;
}

/* Blockquotes and horizontal rules in light mode: subtle surface */
blockquote {
  background: rgba(34,41,57,0.03);
  border-left-color: var(--accent);
  color: rgb(var(--black));
}
hr { border-top-color: rgba(2,6,23,0.06); }

/* Slightly stronger link accent in light mode */
a { color: var(--accent); }
a:hover { color: var(--accent-dark); }

/* Responsive embeds (YouTube, Vimeo, Instagram, tweets, etc.)
   - Make embeds fill the article width and maintain aspect ratio
   - Use .embed-wrapper to force different aspect ratios (data-aspect)
   - Also target embeds inside `.prose` so raw iframes are handled automatically
*/
.embed-wrapper {
  width: 100%;
  max-width: 100%;
  margin: 1rem 0;
  display: block;
  position: relative;
}

/* Default aspect (16:9). Use data-aspect="1/1" or "4/3" to override. */
.embed-wrapper,
.prose iframe,
.prose video,
.prose .instagram-media,
.prose blockquote.instagram-media {
  aspect-ratio: 16/9;
  height: auto;
}

.embed-wrapper[data-aspect="1/1"],
.prose [data-aspect="1/1"] {
  aspect-ratio: 1/1;
}
.embed-wrapper[data-aspect="4/3"],
.prose [data-aspect="4/3"] {
  aspect-ratio: 4/3;
}

.embed-wrapper iframe,
.embed-wrapper video,
.prose iframe,
.prose video,
.prose .instagram-media,
.prose blockquote.instagram-media {
  width: 100%;
  height: 100%;
  border: 0;
  display: block;
  max-height: clamp(220px, 50vh, 800px); /* prevents huge embeds on very large screens */
  object-fit: cover;
}

/* small screens: keep a comfortable height */
@media (max-width: 420px) {
  .embed-wrapper, .prose iframe, .prose video { aspect-ratio: 16/9; max-height: 260px; }
}

/* make images inside embeds scale nicely */
.embed-wrapper img, .prose iframe img { width: 100%; height: auto; object-fit: cover; }

@media (max-width: 380px) {
  /* tighter min-height for very small devices (e.g., iPhone SE / older phones) */
  .embed-wrapper#disqus-embed { min-height: 240px; }
}

/* ---------------- Disqus Responsive Layout ---------------- */
.comments-block { 
  margin-top: 3rem; 
  width: 100%;
  max-width: 100%;
  position: relative;
  --comments-border: rgba(2,6,23,0.12);
  --comments-btn-bg: #ffffff;
  --comments-btn-border: rgba(2,6,23,0.2);
  --comments-btn-hover: rgba(2,6,23,0.05);
}
.comments-header-row { display:flex; align-items:center; justify-content:space-between; gap:1rem; margin-bottom:0.75rem; }
.comments-toggle-btn { font: inherit; cursor: pointer; border:1px solid var(--comments-btn-border); background: var(--comments-btn-bg); padding:0.45rem 0.85rem; border-radius:8px; }
.comments-toggle-btn:hover { background: var(--comments-btn-hover); }
body.dark .comments-toggle-btn { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.18); color:#f3f3f3; }
body.dark .comments-toggle-btn:hover { background: rgba(255,255,255,0.16); }
.comments-toggle-btn .chevron { display:inline-block; transition: transform 260ms cubic-bezier(.4,.2,.2,1); margin-right:4px; }
.comments-block[data-collapsed="true"] .comments-toggle-btn .chevron { transform: rotate(-90deg); }

/* Collapse animation */
.comments-block #comments-shell { transition: max-height 320ms cubic-bezier(.4,.2,.2,1), opacity 220ms ease; will-change: max-height; }
.comments-block[data-collapsed="true"] #comments-shell { opacity:0; }
.comments-block .comments-title { 
  margin: 0 0 1rem 0; 
  font-size: clamp(1.2rem, 2.2vw, 1.6rem); 
  line-height: 1.2;
  text-align: left;
}
#disqus_thread { 
  width: 100%;
  max-width: 100%;
  /* Allow internal sizing & touch events; previously overflow hidden could interfere on some mobile browsers */
  overflow: visible; 
  position: relative;
  -webkit-tap-highlight-color: transparent;
  -webkit-overflow-scrolling: touch;
  touch-action: auto;
}
/* Undo generic iframe constraints inside the prose for Disqus so it can size naturally */
#disqus_thread iframe { 
  height: auto !important; 
  max-height: none !important; 
  object-fit: contain !important; 
  width: 100% !important;
  background: transparent !important;
  pointer-events: auto !important; /* ensure taps propagate */
  touch-action: manipulation;
  transition: height 160ms ease;
}
/* Prevent any nested element from causing horizontal scroll */
#disqus_thread, #disqus_thread * { box-sizing: border-box; }

/* Custom comments shell additions */
.comments-shell { border: 1px solid var(--comments-border); border-radius: 12px; padding: 0.75rem 0.75rem 0.25rem; background: rgba(255,255,255,0.85); backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); }
body.dark .comments-shell { background: rgba(30,30,34,0.6); border-color: rgba(255,255,255,0.1); }
.comments-block[data-state="loading"] .comments-shell { opacity: 0.85; }
.comments-block[data-state="ready"] .comments-actions { display: none; }

/* Skeleton */
.comments-skeleton { display: grid; gap: 8px; margin-bottom: 0.75rem; }
.sk-row { height: 14px; background: linear-gradient(90deg, rgba(2,6,23,0.08), rgba(2,6,23,0.15), rgba(2,6,23,0.08)); background-size: 300% 100%; border-radius: 6px; animation: skPulse 1.4s ease-in-out infinite; }
.sk-row.sk-title { height: 18px; width: 55%; }
.sk-row.sk-short { width: 35%; }
body.dark .sk-row { background: linear-gradient(90deg, rgba(255,255,255,0.07), rgba(255,255,255,0.15), rgba(255,255,255,0.07)); }
@keyframes skPulse { 0%{background-position:0 0;} 50%{background-position:100% 0;} 100%{background-position:0 0;} }

/* Action buttons */
.comments-actions { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 0.5rem; }
.comments-actions button { font: inherit; cursor: pointer; border-radius: 8px; padding: 0.55rem 0.85rem; border: 1px solid var(--comments-btn-border); background: var(--comments-btn-bg); display: inline-flex; align-items: center; gap: 0.4rem; }
.comments-actions button:hover { background: var(--comments-btn-hover); }
body.dark .comments-actions button { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.18); color: #f3f3f3; }
body.dark .comments-actions button:hover { background: rgba(255,255,255,0.16); }
.comments-load-btn::before { content: '💬'; }
.comments-reload-btn::before { content: '↻'; }

/* Alt link (external open) */
.comments-alt-link { margin-top: 0.75rem; font-size: 0.85rem; }
.comments-alt-link a { color: var(--accent); }
body.dark .comments-alt-link a { color: #9bb6ff; }

/* Focus management */
.disqus-thread:focus { outline: 3px solid var(--accent); outline-offset: 4px; border-radius: 6px; }

/* Mobile refinements */
@media (max-width: 480px) {
  .comments-shell { padding: 0.6rem 0.55rem 0.3rem; border-radius: 10px; }
  .comments-actions button { flex: 1 1 auto; justify-content: center; font-size: 0.9rem; }
  .comments-skeleton { gap:6px; }
  .sk-row { height: 12px; }
  .sk-row.sk-title { height: 16px; }
}

@media (max-width: 640px) {
  .comments-block { margin-top: 2.25rem; }
  .comments-block .comments-title { font-size: 1.25rem; }
}
@media (min-width: 1280px) {
  .comments-block { margin-top: 3.5rem; }
}

/* Dark mode readability adjustments for potential Disqus injected backgrounds */
body.dark #disqus_thread { color-scheme: dark; }

/* Small device touch adjustments (e.g., iPhone 7 width ~375px) */
@media (max-width: 430px) {
  .comments-block { padding-left: 0; padding-right: 0; }
  #disqus_thread { -webkit-overflow-scrolling: touch; }
}

/* Extra narrow (old iPhones <=360 logical width) */
@media (max-width: 360px) {
}


