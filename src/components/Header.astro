---
import HeaderLink from './HeaderLink.astro';
---

<header data-aos="fade-down">
   <nav>
	   <h2 data-aos="zoom-in">
		   <a href="/" class="logo-link">
			   <img src="/logo.png" alt="Techoxium" class="site-logo" />
		   </a>
	   </h2>
	   <button class="nav-toggle" aria-expanded="false" aria-label="Toggle navigation" data-aos="fade-left">â˜°</button>
	   <div class="dropdown">
		   <button class="dropdown-toggle" aria-haspopup="true" aria-expanded="false">MenÃ¼ â–¼</button>
		   <div class="dropdown-menu">
			   <HeaderLink href="/about">HakkÄ±mÄ±zda</HeaderLink>
			   <!-- Add more links here -->
		   </div>
	   </div>
	   <button class="dark-toggle" aria-label="Toggle dark mode">ðŸŒ™</button>
   </nav>
</header>
<style>
header {
	margin: 0;
	padding: 0 1em;
	background: var(--header-bg, white);
	box-shadow: 0 2px 8px rgba(var(--black), 5%);
	transition: background 0.3s;
}
h2 {
	margin: 0;
	font-size: 1em;
}
.site-logo {
	height: 2.25rem;
	width: auto;
	display: block;
	vertical-align: middle;
}
.logo-link { display: inline-block; }
h2 a,
h2 a.active {
	text-decoration: none;
}
nav {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 1rem;
}
nav a {
	padding: 1em 0.5em;
	color: var(--nav-link, var(--black));
	border-bottom: 4px solid transparent;
	text-decoration: none;
	transition: color 0.3s;
}
nav a.active {
	text-decoration: none;
	border-bottom-color: var(--accent);
}
.dropdown {
	position: relative;
	display: inline-block;
}
.dropdown-toggle {
	background: none;
	border: none;
	font-size: 1em;
	cursor: pointer;
	padding: 1em 0.5em;
	color: var(--nav-link, var(--black));
	transition: color 0.3s;
}
.dropdown-menu {
	display: none;
	position: absolute;
	top: 100%;
	left: 0;
	background: var(--header-bg, white);
	box-shadow: 0 8px 24px rgba(2,6,23,0.12);
	border-radius: 8px;
	min-width: 160px;
	z-index: 100;
	padding: 0.5rem 0.75rem;
	transition: background 0.3s;
}
.dropdown.open .dropdown-menu {
	display: block;
	animation: fadeIn 0.3s;
}
@keyframes fadeIn {
	from { opacity: 0; transform: translateY(-10px); }
	to { opacity: 1; transform: translateY(0); }
}
.dark-toggle {
	background: none;
	border: none;
	font-size: 1.5em;
	cursor: pointer;
	margin-left: 1em;
	color: var(--nav-link, var(--black));
	transition: color 0.3s;
}
@media (max-width: 720px) {
	.dropdown-menu {
		 left: auto;
		 right: 0;
	}
	.dropdown-toggle {
		 width: 100%;
	}
}
.dark {
	--header-bg: #181a1b;
	--nav-link: #f3f3f3;
}
</style>

<script type="module">
import '../scripts/aos-init.js';
if (typeof window !== 'undefined') {
   // Dropdown menu logic
   const dropdown = document.querySelector('.dropdown');
   const toggle = document.querySelector('.dropdown-toggle');
   if (dropdown && toggle) {
	   toggle.addEventListener('click', (e) => {
		   e.stopPropagation();
		   dropdown.classList.toggle('open');
		   toggle.setAttribute('aria-expanded', dropdown.classList.contains('open'));
	   });
	   document.addEventListener('click', (e) => {
		   if (!dropdown.contains(e.target)) {
			   dropdown.classList.remove('open');
			   toggle.setAttribute('aria-expanded', 'false');
		   }
	   });
   }
   // Dark mode logic
   const darkBtn = document.querySelector('.dark-toggle');
   darkBtn.addEventListener('click', () => {
	   document.body.classList.toggle('dark');
	   localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
   });
   // Persist dark mode
   if (localStorage.getItem('theme') === 'dark') {
	   document.body.classList.add('dark');
   }
}
</script>
