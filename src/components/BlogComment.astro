---
interface Props {
  pageUrl?: string;
  pageId?: string;
}
const { pageUrl = '', pageId = '' } = Astro.props;
const canonical = new URL(Astro.url.pathname, Astro.site);
const finalUrl = pageUrl || canonical.toString();
// Use pathname (no trailing slash) as stable identifier if none passed
const identifier = pageId || Astro.url.pathname.replace(/\/$/, '');
---
<div id="disqus_thread"></div>
<script is:inline>
  var disqus_config = function () {
    this.page.url = ${JSON.stringify(finalUrl)}; // canonical URL
    this.page.identifier = ${JSON.stringify(identifier)}; // unique identifier
  };
  (function() { // DON'T EDIT BELOW THIS LINE
    if (window.__disqus_loaded) return; // safety to avoid duplicate loads
    window.__disqus_loaded = true;
    var d = document, s = d.createElement('script');
    s.src = 'https://tekhaza.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Lütfen JavaScript'i etkinleştirin: <a href="https://disqus.com/?ref_noscript">Disqus yorumlarını görmek için</a>.</noscript>
